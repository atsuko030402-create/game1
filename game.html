<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>çŒœå››ä½å¯†ç å°æ¸¸æˆ</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                   "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
                   sans-serif;
      background: #f5f5f5;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .game {
      background: #ffffff;
      padding: 24px 28px;
      border-radius: 12px;
      width: 320px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      text-align: center;
    }

    h2 {
      margin-top: 0;
    }

    input {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      box-sizing: border-box;
      margin: 12px 0;
    }

    button {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      background: #4f46e5;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background: #4338ca;
    }

    .result {
      margin-top: 12px;
      min-height: 24px;
    }

    .history {
      margin-top: 12px;
      font-size: 14px;
      color: #555;
      text-align: left;
      max-height: 120px;
      overflow-y: auto;
      border-top: 1px solid #eee;
      padding-top: 8px;
    }
  </style>
</head>
<body>

<div class="game">
  <h2>çŒœå››ä½å¯†ç </h2>
  <p>ä½ å¯ä»¥è¿›è¡Œå¤šæ¬¡å°è¯•ï¼Œæˆ‘ä¼šå‘Šè¯‰ä½ æœ‰å‡ ä¸ªæ•°å­—æ­£ç¡®ï¼Œæœ‰å‡ ä¸ªæ•°å­—æ­£ç¡®ä½†ä½ç½®é”™è¯¯ã€‚</p>
  <p>æˆ‘å·²ç»å‡†å¤‡å¥½äº†ä¸€ä¸ªå››ä½å¯†ç ã€‚GOOD LUCK!</p >

  <input id="guess" placeholder="è¯·è¾“å…¥å››ä½æ•°å­—" maxlength="4">
  <button onclick="check()">æäº¤</button>
  <button id="restart" onclick="restart()" style="display:none; margin-top:8px;">
  å†ç©ä¸€æ¬¡
</button>
  <div class="result" id="result"></div>
  <div class="history" id="history"></div>
</div>

<script>
  function restart() {
  password = Array.from({length: 4}, () => Math.floor(Math.random() * 10));
  attempts = 0;
  finished = false;

  document.getElementById("result").textContent = "";
  document.getElementById("history").innerHTML = "";
  document.getElementById("guess").value = "";

  document.getElementById("restart").style.display = "none";
}
  // ç”Ÿæˆå¯†ç ï¼ˆå…è®¸é‡å¤ï¼‰
  let password = Array.from({length: 4}, () => Math.floor(Math.random() * 10));
  let attempts = 0;
  let finished = false;

  function check() {
    if (finished) return;

    const input = document.getElementById("guess").value;
    const result = document.getElementById("result");
    const history = document.getElementById("history");

    if (!/^\d{4}$/.test(input)) {
      result.textContent = "è¯·è¾“å…¥ 4 ä½æ•°å­—ï¼";
      return;
    }

    attempts++;
    const answer = input.split("").map(Number);

    let p_count = 0;
    for (let i = 0; i < 4; i++) {
      if (password[i] === answer[i]) p_count++;
    }

    let count1 = {};
    let count2 = {};

    password.forEach(n => count1[n] = (count1[n] || 0) + 1);
    answer.forEach(n => count2[n] = (count2[n] || 0) + 1);

    let total_match = 0;
    for (let k in count1) {
      if (count2[k]) {
        total_match += Math.min(count1[k], count2[k]);
      }
    }

    let n_count = total_match - p_count;

    history.innerHTML +=
      `<div>ç¬¬ ${attempts} æ¬¡ï¼š${input} â†’ âœ”${p_count} âœ–${n_count}</div>`;

    if (p_count === 4) {
      result.textContent = `ğŸ‰ æ­å–œä½ ç­”å¯¹äº†ï¼ä¸€å…±çŒœäº† ${attempts} æ¬¡`;
      finished = true;
      document.getElementById("restart").style.display = "block";
    } else {
      result.textContent =
        `ä½ç½®å’Œæ•°å­—éƒ½æ­£ç¡®ï¼š${p_count} ä¸ªï¼Œæ•°å­—æ­£ç¡®ä½†ä½ç½®é”™è¯¯ï¼š${n_count} ä¸ª`;
    }

    document.getElementById("guess").value = "";
  }
</script>

</body>
</html>